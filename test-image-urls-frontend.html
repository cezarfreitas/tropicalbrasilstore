<!DOCTYPE html>
<html>
<head>
    <title>Test Image URLs</title>
</head>
<body>
    <h1>Testing Image URL Processing</h1>
    <div id="results"></div>

    <script>
        // Simulate the getImageUrl function
        function getImageUrl(imageUrl) {
            if (!imageUrl || typeof imageUrl !== 'string') {
                return null;
            }

            // If it's already an absolute URL, return as is
            if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {
                return imageUrl;
            }

            // If it's a relative URL starting with /uploads/, convert to absolute
            if (imageUrl.startsWith('/uploads/')) {
                // Use current origin for absolute URL
                return `${window.location.origin}${imageUrl}`;
            }

            // If it's just a filename, assume it's in uploads/products/
            if (!imageUrl.startsWith('/') && !imageUrl.includes('/')) {
                return `${window.location.origin}/uploads/products/${imageUrl}`;
            }

            // Return as is for other cases
            return imageUrl;
        }

        // Test cases
        const testCases = [
            '/uploads/products/product-1754273096747-655259694.png',
            'https://example.com/image.jpg',
            'image.jpg',
            null,
            undefined,
            '',
            'product-1754273096747-655259694.png'
        ];

        const resultsDiv = document.getElementById('results');
        
        testCases.forEach((testCase, index) => {
            const result = getImageUrl(testCase);
            const div = document.createElement('div');
            div.innerHTML = `
                <p><strong>Test ${index + 1}:</strong></p>
                <p>Input: <code>${testCase}</code></p>
                <p>Output: <code>${result}</code></p>
                ${result ? `<img src="${result}" alt="Test image" style="max-width: 100px; max-height: 100px;" onerror="this.style.border='2px solid red'; this.alt='Error loading'">` : ''}
                <hr>
            `;
            resultsDiv.appendChild(div);
        });
    </script>
</body>
</html>
